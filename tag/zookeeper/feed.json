{
    "version": "https://jsonfeed.org/version/1",
    "title": "XYH",
    "subtitle": "",
    "icon": "http://www.xieyihui.top/images/favicon.ico",
    "description": "",
    "home_page_url": "http://www.xieyihui.top",
    "items": [
        {
            "id": "http://www.xieyihui.top/2020/11/11/computer-science/Big-data/week-4/",
            "url": "http://www.xieyihui.top/2020/11/11/computer-science/Big-data/week-4/",
            "title": "第4周 Zookeeper常用操作命令",
            "date_published": "2020-11-11T12:23:38.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">\n<p>以下为个人学习笔记</p>\n</div>\n<h1 id=\"课堂笔记\"><a class=\"anchor\" href=\"#课堂笔记\">#</a> 课堂笔记</h1>\n<h2 id=\"检查环境hadoop集群环境\"><a class=\"anchor\" href=\"#检查环境hadoop集群环境\">#</a> 检查环境 hadoop 集群环境</h2>\n<p>hadoop1 运行 <code>jps</code>  命令的截图<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.11.png\" alt=\"\" /><br />\n hadoop2 运行 <code>jps</code>  命令的截图<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.12.png\" alt=\"\" /><br />\n hadoop3 运行 <code>jps</code>  命令的截图<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.13.png\" alt=\"\" /></p>\n<h2 id=\"检查环境zookeeper集群环境\"><a class=\"anchor\" href=\"#检查环境zookeeper集群环境\">#</a> 检查环境 zookeeper 集群环境</h2>\n<p>在 hadoop1 查看 zookeeper 状态<br />\n在终端执行命令： <code>zkServer.sh status</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.1.png\" alt=\"\" /><br />\n 在 hadoop2 查看 zookeeper 状态<br />\n在终端执行命令： <code>zkServer.sh status</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.2.png\" alt=\"\" /><br />\n 在 hadoop3 查看 zookeeper 状态<br />\n在终端执行命令： <code>zkServer.sh status</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.3.png\" alt=\"\" /></p>\n<h2 id=\"zookeeper常见命令\"><a class=\"anchor\" href=\"#zookeeper常见命令\">#</a> Zookeeper 常见命令</h2>\n<h3 id=\"打开客户端\"><a class=\"anchor\" href=\"#打开客户端\">#</a> 打开客户端</h3>\n<p>在终端执行命令：<span class=\"exturl\" data-url=\"aHR0cDovL3prQ2xpLnNo\">zkCli.sh</span> -server hadoop1:2181<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.4.png\" alt=\"\" /><br />\n 成功连接的截图：<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.5.png\" alt=\"\" /></p>\n<h3 id=\"创建zookeeper节点\"><a class=\"anchor\" href=\"#创建zookeeper节点\">#</a> 创建 Zookeeper 节点</h3>\n<p>使用 create 命令，可以创建一个 Zookeeeper 节点<br />\n <code>create [-s] [-e] path data acl</code> <br />\n 其中，-s 或 - e 分别指定节点特性，顺序或临时节点，若不指定，则表示持久节点；acl 用来进行权限控制。</p>\n<ul>\n<li><strong>创建顺序节点</strong><br />\n使用 <code>create -s /zk-test 123</code>  命令创建 zk-test 顺序节点<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.6.png\" alt=\"\" /></li>\n<li><strong>创建临时节点</strong><br />\n使用 <code>create -e /zk-temp 123</code>  命令创建 zk-temp 临时节点<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.7.png\" alt=\"\" /></li>\n<li><strong>创建永久节点</strong><br />\n使用 <code>create /zk-permanent 123</code>  命令创建 zk-permanent 永久节点<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.8.png\" alt=\"\" /></li>\n</ul>\n<h3 id=\"读取节点\"><a class=\"anchor\" href=\"#读取节点\">#</a> 读取节点</h3>\n<p>与读取相关的命令有 ls 命令和 get 命令，ls 命令可以列出 Zookeeper 指定节点下的所有子节点，只能查看指定节点下的第一级的所有子节点；get 命令可以获取 Zookeeper 指定节点的数据内容和属性信息。<br />\n用法：<br />\n <code>ls path [watch]</code> <br />\n <code>get path [watch]</code> <br />\n 如果想获取根节点下面的所有子节点，使用 <code>ls /</code>  命令即可<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.9.png\" alt=\"\" /><br />\n如果想获取根节点数据内容和属性信息，使用 <code>get /</code>  命令即可<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.10.png\" alt=\"\" /><br />\n如果想获取 /zk-permanent 的数据内容和属性，可使用 <code>get /zk-permanent</code>  命令<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.11.png\" alt=\"\" /></p>\n<h3 id=\"更新节点\"><a class=\"anchor\" href=\"#更新节点\">#</a> 更新节点</h3>\n<p>使用 set 命令，可以更新指定节点的数据内容<br />\n用法： <code>set path data [version]</code> <br />\n 其中，data 就是要更新的新内容，version 表示数据版本，<br />\n如将 /zk-permanent 节点的数据更新为 456，可以使用如下命令： <code>set /zk-permanent 456</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.12.png\" alt=\"\" /></p>\n<h3 id=\"删除节点\"><a class=\"anchor\" href=\"#删除节点\">#</a> 删除节点</h3>\n<p>使用 delete 命令可以删除 Zookeeper 上的指定节点<br />\n用法： <code>delete path [version]</code> <br />\n 其中 version 也是表示数据版本，使用 <code>delete /zk-permanent</code>  命令即可删除 /zk-permanent 节点<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.13.png\" alt=\"\" /><br />\n<span class=\"red\">注：</span><br />\n若删除节点存在子节点，那么无法删除该节点，必须先删除子节点，再删除父节点。</p>\n<h3 id=\"退出客户端\"><a class=\"anchor\" href=\"#退出客户端\">#</a> 退出客户端</h3>\n<p>使用 <code>quit</code>  命令退出客户端<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/4.14.png\" alt=\"\" /></p>\n",
            "tags": [
                "计算机科学",
                "大数据技术原理与应用",
                "大数据",
                "学习笔记",
                "Zookeeper"
            ]
        },
        {
            "id": "http://www.xieyihui.top/2020/11/11/computer-science/Big-data/week-3/",
            "url": "http://www.xieyihui.top/2020/11/11/computer-science/Big-data/week-3/",
            "title": "第3周 Zookeeper集群环境部署",
            "date_published": "2020-11-11T09:30:40.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">\n<p>以下为个人学习笔记</p>\n</div>\n<h1 id=\"课堂笔记\"><a class=\"anchor\" href=\"#课堂笔记\">#</a> 课堂笔记</h1>\n<h2 id=\"检查环境hadoop集群环境\"><a class=\"anchor\" href=\"#检查环境hadoop集群环境\">#</a> 检查环境 hadoop 集群环境</h2>\n<p>hadoop1 运行 <code>jps</code>  命令的截图<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.11.png\" alt=\"\" /><br />\n hadoop2 运行 <code>jps</code>  命令的截图<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.12.png\" alt=\"\" /><br />\n hadoop3 运行 <code>jps</code>  命令的截图<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.13.png\" alt=\"\" /></p>\n<h2 id=\"安装zookeeper集群\"><a class=\"anchor\" href=\"#安装zookeeper集群\">#</a> 安装 Zookeeper 集群</h2>\n<h3 id=\"软件包准备\"><a class=\"anchor\" href=\"#软件包准备\">#</a> 软件包准备</h3>\n<p>下载好<span class=\"exturl\" data-url=\"aHR0cDovL2FyY2hpdmUuYXBhY2hlLm9yZy9kaXN0L3pvb2tlZXBlci96b29rZWVwZXItMy40LjEwLw==\"> zookeeper-3.4.10</span> 的</p>\n<h3 id=\"进入软件包的目录下解压安装压缩包将zookeeper安装包解压缩到opt目录下\"><a class=\"anchor\" href=\"#进入软件包的目录下解压安装压缩包将zookeeper安装包解压缩到opt目录下\">#</a> 进入软件包的目录下解压安装压缩包将 zookeeper 安装包解压缩到 /opt 目录下</h3>\n<p>在终端执行命令： <code>cd /opt/hadoop-package</code> <br />\n 在终端执行命令： <code>tar -zxvf zookeeper-3.4.10.tar.gz -C /opt/</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/3.1.1.png\" alt=\"\" /><br />\n 解压完成截图：<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/3.1.2.png\" alt=\"\" /></p>\n<h3 id=\"准备文件\"><a class=\"anchor\" href=\"#准备文件\">#</a> 准备文件</h3>\n<ul>\n<li><strong>进入 zookeeper 配置文件目录</strong><br />\n在终端执行命令： <code>cd /opt/zookeeper-3.4.10/conf</code></li>\n<li><strong>将 zoo_sample.cfg 配置文件复制一份并重命名为 zoo.cfg</strong><br />\n 在终端执行命令： <code>cp zoo_sample.cfg zoo.cfg</code></li>\n<li><strong>创建存放数据的文件夹</strong><br />\n在终端执行命令： <code>mkdir /opt/zookeeper-3.4.10/data</code></li>\n<li><strong>创建 myid 文件，并加入数字 1 （hadoop1 主节点为 1、hadoop2 从节点为 2、hadoop3 从节点为 3）</strong><br />\n在终端执行命令： <code>vim /opt/zookeeper-3.4.10/data/myid</code></li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#hadoop1 的 myid</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">1</span></pre></td></tr></table></figure><h3 id=\"修改zoocfg配置文件\"><a class=\"anchor\" href=\"#修改zoocfg配置文件\">#</a> 修改 zoo.cfg 配置文件</h3>\n<p>在终端执行命令： <code>vim /opt/zookeeper-3.4.10/conf/zoo.cfg</code> <br />\n 将配置文件中 dataDir 的路径改为 <code>/opt/zookeeper-3.4.10/data</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/3.2.1.png\" alt=\"\" /><br />\n 在配置文件最下面加入以下参数：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>server.1<span class=\"token operator\">=</span>hadoop1:2888:3888</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>server.2<span class=\"token operator\">=</span>hadoop2:2888:3888</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>server.3<span class=\"token operator\">=</span>hadoop3:2888:3888</pre></td></tr></table></figure><p>修改好的配置截图：<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/3.2.2.png\" alt=\"\" /><br />\n<strong>zoo.cfg 各语句的含义</strong><br />\n <code>tickTime</code> ：服务器与客户端之间交互的基本时间单元（ms）<br />\n <code>initLimit</code> ：允许 follower 连接并同步到 leader 的初始化时间，它以 tickTime 的倍数来表示。当超过设置倍数的 tickTime 时间，则连接失败<br />\n <code>syncLimit</code> ：Leader 服务器与 follower 服务器之间信息同步允许的最大时间间隔，如果超过次间隔，默认 follower 服务器与 leader 服务器之间断开链接<br />\n <code>dataDir</code> ：保存 zookeeper 数据路径<br />\n <code>clientPort</code> ：客户端访问 zookeeper 时经过服务器端时的端口号</p>\n<h3 id=\"同步配置文件到hadoop2和hadoop3上\"><a class=\"anchor\" href=\"#同步配置文件到hadoop2和hadoop3上\">#</a> 同步配置文件到 hadoop2 和 hadoop3 上</h3>\n<ul>\n<li><strong>将配置文件同步到 hadoop2 上</strong><br />\n在终端执行命令： <code>scp -r /opt/zookeeper-3.4.10/ root@hadoop2:/opt</code></li>\n<li><strong>将配置文件同步到 hadoop3 上</strong><br />\n在终端执行命令： <code>scp -r /opt/zookeeper-3.4.10/ root@hadoop3:/opt</code></li>\n</ul>\n<h3 id=\"修改hadoop2和hadoop3上的myid\"><a class=\"anchor\" href=\"#修改hadoop2和hadoop3上的myid\">#</a> 修改 hadoop2 和 hadoop3 上的 myid</h3>\n<p>在 hadoop2 上将 myid 修改为 2<br />\n 在终端执行命令： <code>vim /opt/zookeeper-3.4.10/data/myid</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/3.3.1.png\" alt=\"\" /></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#hadoop2 的 myid</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">2</span></pre></td></tr></table></figure><p>在 hadoop3 上将 myid 修改为 3<br />\n 在终端执行命令： <code>vim /opt/zookeeper-3.4.10/data/myid</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/3.3.2.png\" alt=\"\" /></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#hadoop3 的 myid</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">3</span></pre></td></tr></table></figure><h2 id=\"启动zookeeper集群并测试\"><a class=\"anchor\" href=\"#启动zookeeper集群并测试\">#</a> 启动 zookeeper 集群并测试</h2>\n<h3 id=\"分别启动hadoop1-hadoop2-hadoop3节点的zookeeper集群命\"><a class=\"anchor\" href=\"#分别启动hadoop1-hadoop2-hadoop3节点的zookeeper集群命\">#</a> 分别启动 hadoop1、hadoop2、hadoop3 节点的 zookeeper 集群命</h3>\n<p>在 hadoop1 启动 zookeeper<br />\n 在终端执行命令： <code>zkServer.sh start</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/3.4.1.png\" alt=\"\" /><br />\n 在 hadoop2 启动 zookeeper<br />\n 在终端执行命令： <code>zkServer.sh start</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/3.4.2.png\" alt=\"\" /><br />\n 在 hadoop3 启动 zookeeper<br />\n 在终端执行命令： <code>zkServer.sh start</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/3.4.3.png\" alt=\"\" /></p>\n<h3 id=\"查看启动成功命令\"><a class=\"anchor\" href=\"#查看启动成功命令\">#</a> 查看启动成功命令</h3>\n<p>通过 <code>zkServer.sh status</code>  命令可以查看启动的状态<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/3.5.png\" alt=\"\" /><br />\n至此，zookeeper-3.4.10 已经成功安装部署啦</p>\n",
            "tags": [
                "计算机科学",
                "大数据技术原理与应用",
                "大数据",
                "学习笔记",
                "教程",
                "Zookeeper"
            ]
        }
    ]
}