{
    "version": "https://jsonfeed.org/version/1",
    "title": "XYH",
    "subtitle": "",
    "icon": "http://www.xieyihui.top/images/favicon.ico",
    "description": "",
    "home_page_url": "http://www.xieyihui.top",
    "items": [
        {
            "id": "http://www.xieyihui.top/2020/11/08/computer-science/Big-data/week-1/",
            "url": "http://www.xieyihui.top/2020/11/08/computer-science/Big-data/week-1/",
            "title": "第1周 Hadoop3.1.0集群环境部署",
            "date_published": "2020-11-08T02:54:33.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">\n<p>以下为个人学习笔记和习题整理</p>\n</div>\n<h1 id=\"课堂笔记\"><a class=\"anchor\" href=\"#课堂笔记\">#</a> 课堂笔记</h1>\n<h2 id=\"准备主机环境\"><a class=\"anchor\" href=\"#准备主机环境\">#</a> 准备主机环境</h2>\n<h3 id=\"一-安装虚拟机\"><a class=\"anchor\" href=\"#一-安装虚拟机\">#</a> 一、安装虚拟机</h3>\n<p>VMware 下载地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudm13YXJlLmNvbS9wcm9kdWN0cy93b3Jrc3RhdGlvbi1wcm8vd29ya3N0YXRpb24tcHJvLWV2YWx1YXRpb24uaHRtbA==\">https://www.vmware.com/products/workstation-pro/workstation-pro-evaluation.html</span><br />\n 系统 ios：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY2VudG9zLm9yZy9kb3dubG9hZC8=\">https://www.centos.org/download/</span><br />\n 基本上都是傻瓜式默认安装。</p>\n<h3 id=\"二-网络配置\"><a class=\"anchor\" href=\"#二-网络配置\">#</a> 二、网络配置</h3>\n<p><img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.1.png\" alt=\"\" /><br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.2.png\" alt=\"\" /><br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.3.png\" alt=\"\" /><br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.4.png\" alt=\"\" /><br />\n应用确定后，运行虚拟机，打开终端：</p>\n<ul>\n<li>1. 查看网卡  <code>ip adrr</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.5.png\" alt=\"\" /></li>\n<li>2. 进入 /etc/sysconfig/network-scripts/ 下查看  <code>cd /etc/sysconfig/network-scripts/</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.6.png\" alt=\"\" /></li>\n<li>3. 编辑 ifcfg-ens33 文件  <code>vim /etc/sysconfig/network-scripts/ifcfg-ens33</code> <br />\n 将原内容修改成</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">TYPE</span><span class=\"token operator\">=</span>Ethernet</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">PROXY_METHOD</span><span class=\"token operator\">=</span>none</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">BROWSER_ONLY</span><span class=\"token operator\">=</span>no</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#BOOTPROTO=dhcp</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">DEFROUTE</span><span class=\"token operator\">=</span>yes</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">IPV4_FAILURE_FATAL</span><span class=\"token operator\">=</span>no</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">IPV6INIT</span><span class=\"token operator\">=</span>yes</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token assign-left variable\">IPV6_AUTOCONF</span><span class=\"token operator\">=</span>yes</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token assign-left variable\">IPV6_DEFROUTE</span><span class=\"token operator\">=</span>yes</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">IPV6_FAILURE_FATAL</span><span class=\"token operator\">=</span>no</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token assign-left variable\">IPV6_ADDR_GEN_MODE</span><span class=\"token operator\">=</span>stable-privacy</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token assign-left variable\">NAME</span><span class=\"token operator\">=</span>ens33</pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token assign-left variable\">UUID</span><span class=\"token operator\">=</span>c500a478-a621-42d4-b50e-1bd710003939</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token assign-left variable\">DEVICE</span><span class=\"token operator\">=</span>ens33</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">#ONBOOT=no</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token assign-left variable\">IPV6_PRIVACY</span><span class=\"token operator\">=</span>no</pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">#static assignment</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token assign-left variable\">NM_CONTROLLED</span><span class=\"token operator\">=</span>no <span class=\"token comment\">#表示该接口将通过该配置文件进行设置，而不是通过网络管理器进行管理</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token assign-left variable\">ONBOOT</span><span class=\"token operator\">=</span>yes <span class=\"token comment\">#开机启动</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token assign-left variable\">BOOTPROTO</span><span class=\"token operator\">=</span>static <span class=\"token comment\">#静态 IP</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token assign-left variable\">IPADDR</span><span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.43.177 <span class=\"token comment\">#本机地址</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token assign-left variable\">NETMASK</span><span class=\"token operator\">=</span><span class=\"token number\">255.255</span>.255.0 <span class=\"token comment\">#子网掩码</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token assign-left variable\">GATEWAY</span><span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.43.2 <span class=\"token comment\">#默认网关</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token assign-left variable\">DNS1</span><span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.43.2</pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token assign-left variable\">DNS</span><span class=\"token operator\">=</span><span class=\"token number\">8.8</span>.8.8</pre></td></tr></table></figure><p>保存退出： <code>:wq</code></p>\n<ul>\n<li>4. 重启网络服务  <code>service network restart</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.7.png\" alt=\"\" /></li>\n<li>5. 查看 ip 信息  <code>ifconfig</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.8.png\" alt=\"\" /></li>\n<li>ping 一下百度，看看是否配置成功  <code>ping www.baidu.com</code> <br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.9.png\" alt=\"\" /></li>\n</ul>\n<h3 id=\"三-更改主机名称\"><a class=\"anchor\" href=\"#三-更改主机名称\">#</a> 三、更改主机名称</h3>\n<ul>\n<li>修改主机名文件（重启永久生效）  <code>vim /etc/sysconfig/network</code> <br />\n 按照同样的方法设置两个节点的 ip 和主机名<br />\n hadoop1 为主节点，hadoop2、hadoop3 为从节点</li>\n</ul>\n<h3 id=\"四-建立主机名和ip的映射\"><a class=\"anchor\" href=\"#四-建立主机名和ip的映射\">#</a> 四、建立主机名和 ip 的映射</h3>\n<ul>\n<li>1. 建立映射  <code>vim /etc/hosts</code> <br />\n 在末尾添加三条记录</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hadoop1\t\thadoop1的ip</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>hadoop2\t\thadoop2的ip</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>hadoop3\t\thadoop3的ip</pre></td></tr></table></figure><ul>\n<li>2. 将映射关系同步到其它两台虚拟机上<br />\n <code>scp -r /etc/hosts root@hadoop2:/etc</code> <br />\n <code>scp -r /etc/hosts root@hadoop3:/etc</code></li>\n</ul>\n<h3 id=\"五-关闭防火墙\"><a class=\"anchor\" href=\"#五-关闭防火墙\">#</a> 五、关闭防火墙</h3>\n<p>关闭防火墙： <code>systemctl stop firewalld.service</code></p>\n<h3 id=\"六-配置ssh免密登录\"><a class=\"anchor\" href=\"#六-配置ssh免密登录\">#</a> 六、配置 ssh 免密登录</h3>\n<ul>\n<li>1. 更新 SSH  <code>sudo apt-get install openssh-server</code> <br />\n 在安装 SSH 过程中，如果提示问 “Do you want to continue?”，请输入 “Y”。<br />\n安装好后，在终端中输入 “ssh  localhost” 需要输入密码才能访问。</li>\n<li>2. 配置 SSH<br />\n (1)、进入文件  <code>cd ~/.ssh/</code>         # 若没有该目录，请先执行一次 ssh localhost<br />\n (2)、生成公钥  <code>ssh-keygen -t rsa</code>     # 会有提示，都按回车即可<br />\n (3)、授权  <code>cat ./id_rsa.pub &gt;&gt; ./authorized_keys</code>   # 加入授权<br />\n再次，在终端中输入 “ssh  localhost” 无需密码直接登录，输入 exit 可以退出 ssh 登录。</li>\n<li>3. 远程发送公钥同步到 haddop2 和 hadoop3 上<br />\n <code>scp ~/.ssh/id_rsa.pub root@hadoop2:~/.ssh/</code> <br />\n <code>scp ~/.ssh/id_rsa.pub root@hadoop3:~/.ssh/</code></li>\n<li>4. 依次进入 hadoop2、hadoop3 中进行授权操作  <code>cat ./id_rsa.pub &gt;&gt; ./authorized_keys</code></li>\n</ul>\n<h3 id=\"七-安装jdk\"><a class=\"anchor\" href=\"#七-安装jdk\">#</a> 七、安装 JDK</h3>\n<ul>\n<li>1. 官网下载 jdk:<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cub3JhY2xlLmNvbS9qYXZhL3RlY2hub2xvZ2llcy9qYXZhc2UvamF2YXNlLWpkazgtZG93bmxvYWRzLmh0bWw=\">https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html</span></li>\n<li>2. 使用 tar 解压文件到 /opt 目录在  <code>tar -zxvf jdk-8u161-linux-x64.tar.gz -C /opt/</code></li>\n<li>3. 查看是否安装成功  <code>./java -version</code></li>\n<li>4. 配置环境变量 PATH  <code>vim etc/ptofile</code> <br />\n 在最末尾添加四行</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">JAVA_HOME</span><span class=\"token operator\">=</span>/opt/jdk1.8.0_162\t<span class=\"token comment\">#路径因人而异，要填入自己的路径</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">JRE_HOME</span><span class=\"token operator\">=</span><span class=\"token variable\">$JAVA_HOME</span>/jre</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">CLASSPATH</span><span class=\"token operator\">=</span>.:<span class=\"token variable\">$JAVA_HOME</span>/lib</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token environment constant\">$PATH</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">$JAVA_HOME</span>/bin</pre></td></tr></table></figure><ul>\n<li>5. 使环境变量立刻生效  <code>source /etc/profile</code></li>\n<li>6. 同步 hadoop1 主节点的配置到 hadoop2 和 hadoop3 上<br />\n <code>scp -r /opt/jdk1.8.0_162 root@hadoop2:/opt/</code> <br />\n <code>scp -r /opt/jdk1.8.0_162 root@hadoop3:/opt/</code> <br />\n <code>scp -r /etc/profile root@hadoop2:/etc/profile</code> <br />\n <code>scp -r /etc/profile root@hadoop3:/etc/profile</code></li>\n<li>7. 依次到 hadoop2 和 hadoop3 上生效环境变量  <code>source /etc/profile</code></li>\n</ul>\n<h2 id=\"安装hadoop\"><a class=\"anchor\" href=\"#安装hadoop\">#</a> 安装 Hadoop</h2>\n<p>下载好<span class=\"exturl\" data-url=\"aHR0cDovL2FyY2hpdmUuYXBhY2hlLm9yZy9kaXN0L2hhZG9vcC9jb3JlL2hhZG9vcC0zLjEuMC8=\"> hadoop3.1.0</span> 压缩包，放到 /opt/ 目录下<br />\n进入到软件包目录  <code>cd /opt/</code></p>\n<h3 id=\"解压hadoop-310安装包\"><a class=\"anchor\" href=\"#解压hadoop-310安装包\">#</a> 解压 hadoop-3.1.0 安装包</h3>\n<p>终端执行命令  <code>tar -zxvf hadoop-3.1.0.tar.gz -C /opt/</code></p>\n<h3 id=\"配置环境变量\"><a class=\"anchor\" href=\"#配置环境变量\">#</a> 配置环境变量</h3>\n<p>终端执行命令  <code>vim /etc/profile</code> <br />\n 在末尾添加四行</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#SET HADOOP</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">HADOOP_HOME</span><span class=\"token operator\">=</span>/opt/hadoop-3.1.0</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token variable\">$HADOOP_HOME</span>/bin:<span class=\"token variable\">$HADOOP_HOME</span>/sbin:<span class=\"token environment constant\">$PATH</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">export</span> HADOOP_HOME <span class=\"token environment constant\">PATH</span></pre></td></tr></table></figure><p>使环境变量生效  <code>source /etc/profile</code></p>\n<h3 id=\"修改core-sitexml配置文件\"><a class=\"anchor\" href=\"#修改core-sitexml配置文件\">#</a> 修改 core-site.xml 配置文件</h3>\n<ul>\n<li>1. 在终端执行命令  <code>vim /opt/hadoop-3.1.0/etc/hadoop/core-site.xml</code></li>\n<li>2. 在  <code>&lt;configuration&gt; &lt;/configuration&gt;</code>  中间添加下面代码</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>fs.defaultFS<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>hdfs://hadoop1:900<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>/value<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre> <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>hadoop.tmp.dir<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>/opt/hadoop-3.1.0/tmp<span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span></pre></td></tr></table></figure><h3 id=\"修改hdfs-sitexml配置文件\"><a class=\"anchor\" href=\"#修改hdfs-sitexml配置文件\">#</a> 修改 hdfs-site.xml 配置文件</h3>\n<ul>\n<li>1. 在终端执行命令  <code>vim /opt/hadoop-3.1.0/etc/hadoop/hdfs-site.xml</code></li>\n<li>2. 在  <code>&lt;configuration&gt; &lt;/configuration&gt;</code>  中间添加下面代码</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs.replication<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span><span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>&lt;</span>/value<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs.namenode.name.dir<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>file:///opt/hadoop-3.1.0/hdfs/name<span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs.datanode.data.dir<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>file:///opt/hadoop-3.1.0/hdfs/data<span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs.namenode.secondary.http-address<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>hadoop2:900<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>&lt;</span>/value<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span></pre></td></tr></table></figure><h3 id=\"修改workers配置文件\"><a class=\"anchor\" href=\"#修改workers配置文件\">#</a> 修改 workers 配置文件</h3>\n<ul>\n<li>1. 在终端执行命令  <code>vim /opt/hadoop-3.1.0/etc/hadoop/workers</code></li>\n<li>2. 删除里面的 localhost，加入 hadoop2 和 hadoop3</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hadoop2</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>-guangzhou.myqcloud.com/blog_picture/big-data_picture/1  hadoop3</pre></td></tr></table></figure><h3 id=\"修改mapred-sitexml配置文件\"><a class=\"anchor\" href=\"#修改mapred-sitexml配置文件\">#</a> 修改 mapred-site.xml 配置文件</h3>\n<ul>\n<li>1. 在终端执行命令  <code>vim /opt/hadoop-3.1.0/etc/hadoop/mapred-site.xml</code></li>\n<li>2. 在  <code>&lt;configuration&gt; &lt;/configuration&gt;</code>  中间添加下面代码</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>mapreduce.framework.name<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>yarn<span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>mapreduce.application.classpath<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>/opt/hadoop-3.1.0/etc/hadoop,</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>/opt/hadoop-3.1.0/share/hadoop/common/*,</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>/opt/hadoop-3.1.0/share/hadoop/common/lib/*,</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>/opt/hadoop-3.1.0/share/hadoop/hdfs/*,</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>/opt/hadoop-3.1.0/share/hadoop/hdfs/lib/*,</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>/opt/hadoop-3.1.0/share/hadoop/mapreduce/*,</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>/opt/hadoop-3.1.0/share/hadoop/mapreduce/lib/*,</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>/opt/hadoop-3.1.0/share/hadoop/yarn/*,</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>/opt/hadoop-3.1.0/share/hadoop/yarn/lib/*</pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span></pre></td></tr></table></figure><h3 id=\"修改yarn-sitexml配置文件\"><a class=\"anchor\" href=\"#修改yarn-sitexml配置文件\">#</a> 修改 yarn-site.xml 配置文件</h3>\n<ul>\n<li>1. 在终端执行命令  <code>vim /opt/hadoop-3.1.0/etc/hadoop/yarn-site.xml</code></li>\n<li>2. 在  <code>&lt;configuration&gt; &lt;/configuration&gt;</code>  中间添加下面代码</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>yarn.resourcemanager.hostname<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>hadoop<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>&lt;</span>/value<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>yarn.nodemanager.aux-services<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>mapreduce_shuffle<span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span></pre></td></tr></table></figure><h3 id=\"修改hadoop-envsh配置文件\"><a class=\"anchor\" href=\"#修改hadoop-envsh配置文件\">#</a> 修改 hadoop-env.sh 配置文件</h3>\n<ul>\n<li>1. 在终端执行命令  <code>vim /opt/hadoop-3.1.0/etc/hadoop/hadoop-env.sh</code></li>\n<li>2. 在 hadoop-env.sh 配置文件的第二行添加下面代码</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">JAVA_HOME</span><span class=\"token operator\">=</span>/opt/jdk1.8.0_162</pre></td></tr></table></figure><h3 id=\"取消打印警告信息\"><a class=\"anchor\" href=\"#取消打印警告信息\">#</a> 取消打印警告信息</h3>\n<ul>\n<li>1. 在终端执行命令  <code>vim /opt/hadoop-3.1.0/etc/hadoop/log4j.properties</code></li>\n<li>2. 在打开的 log4j.properties 配置文件的首行添加下面代码</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>log4j.logger.org.apache.hadoop.util.NativeCodeLoader<span class=\"token operator\">=</span>ERROR</pre></td></tr></table></figure><h3 id=\"修改start-dfssh和stop-dfssh配置文件\"><a class=\"anchor\" href=\"#修改start-dfssh和stop-dfssh配置文件\">#</a> 修改 start-dfs.sh 和 stop-dfs.sh 配置文件</h3>\n<ul>\n<li>1. 在终端执行命令  <code>vim /opt/hadoop-3.1.0/sbin/start-dfs.sh</code></li>\n<li>2. 在打开的 start-dfs.sh 配置文件的第二行添加下面代码</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HDFS_NAMENODE_SECURE_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HDFS_DATANODE_SECURE_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HDFS_SECONDARYNAMENODE_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HDFS_NAMENODE_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HDFS_DATANODE_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HDFS_SECONDARYNAMENODE_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">YARN_RESOURCEMANAGER_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">YARN_NODEMANAGER_USER</span><span class=\"token operator\">=</span>root</pre></td></tr></table></figure><ul>\n<li>3. 在终端执行命令  <code>vim /opt/hadoop-3.1.0/sbin/stop-dfs.sh</code></li>\n<li>4. 在打开的 stop-dfs.sh 配置文件的第二行添加下面代码</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HDFS_NAMENODE_SECURE_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HDFS_DATANODE_SECURE_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HDFS_SECONDARYNAMENODE_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HDFS_NAMENODE_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HDFS_DATANODE_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HDFS_SECONDARYNAMENODE_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">YARN_RESOURCEMANAGER_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">YARN_NODEMANAGER_USER</span><span class=\"token operator\">=</span>root</pre></td></tr></table></figure><h3 id=\"修改start-yarnsh和stop-yarnsh配置文件\"><a class=\"anchor\" href=\"#修改start-yarnsh和stop-yarnsh配置文件\">#</a> 修改 start-yarn.sh 和 stop-yarn.sh 配置文件</h3>\n<ul>\n<li>1. 在终端执行命令  <code>vim /opt/hadoop-3.1.0/sbin/start-yarn.sh</code></li>\n<li>2. 在打开的 start-yarn.sh 配置文件的第二行添加下面代码</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">YARN_RESOURCEMANAGER_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HADOOP_SECURE_DN_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">YARN_NODEMANAGER_USER</span><span class=\"token operator\">=</span>root</pre></td></tr></table></figure><ul>\n<li>3. 在终端执行命令  <code>vim /opt/hadoop-3.1.0/sbin/stop-yarn.sh</code></li>\n<li>4. 在打开的 stop-yarn.sh 配置文件的第二行添加下面代码</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">YARN_RESOURCEMANAGER_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HADOOP_SECURE_DN_USER</span><span class=\"token operator\">=</span>root</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">YARN_NODEMANAGER_USER</span><span class=\"token operator\">=</span>root</pre></td></tr></table></figure><h3 id=\"同步hadoop1主节点的配置到hadoop2和hadoop3上\"><a class=\"anchor\" href=\"#同步hadoop1主节点的配置到hadoop2和hadoop3上\">#</a> 同步 hadoop1 主节点的配置到 hadoop2 和 hadoop3 上</h3>\n<ul>\n<li>1、将 hadoop 配置文件同步到 hadoop2 上<br />\n在终端执行命令  <code>scp -r /opt/hadoop-3.1.0 root@hadoop2:/opt/</code> <br />\n 在终端执行命令  <code>scp -r /etc/profile root@hadoop2:/etc/profile</code> <br />\n 进入 hadoop2，在终端执行命令  <code>source /etc/profile</code></li>\n<li>2、将 hadoop 配置文件同步到 hadoop3 上<br />\n在终端执行命令  <code>scp -r /opt/hadoop-3.1.0 root@hadoop3:/opt/</code> <br />\n 在终端执行命令  <code>scp -r /etc/profile root@hadoop3:/etc/profile</code> <br />\n 进入 hadoop3，在终端执行命令  <code>source /etc/profile</code> <br />\n 返回 hadoop1 主节点</li>\n</ul>\n<h3 id=\"格式化hdfs文件系统\"><a class=\"anchor\" href=\"#格式化hdfs文件系统\">#</a> 格式化 HDFS 文件系统</h3>\n<p>在终端执行命令  <code>hdfs namenode -format</code> <br />\n 成功后截图：<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.10.png\" alt=\"\" /></p>\n<h2 id=\"启动集群\"><a class=\"anchor\" href=\"#启动集群\">#</a> 启动集群</h2>\n<ul>\n<li>在 hadoop1 主节点中进入 /opt/hadoop-3.1.0/sbin/ 目录  <code>cd /opt/hadoop-3.1.0/sbin/</code></li>\n<li>启动集群  <code>./start-all.sh</code></li>\n<li>在 3 台 hadoop 节点上执行 jps 命令查看 hadoop 进程\n<ul>\n<li>\n<p>hadoop1 运行 jps 命令的截图<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.11.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>hadoop2 运行 jps 命令的截图<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.12.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>hadoop3 运行 jps 命令的截图<br />\n<img data-src=\"https://picture-1303140728.cos.ap-guangzhou.myqcloud.com/blog_picture/big-data_picture/1.13.png\" alt=\"\" /><br />\n到此，Hadoop3.1.0 集群已经成功安装完成！</p>\n</li>\n</ul>\n</li>\n</ul>\n",
            "tags": [
                "计算机科学",
                "大数据技术原理与应用",
                "大数据",
                "学习笔记"
            ]
        }
    ]
}